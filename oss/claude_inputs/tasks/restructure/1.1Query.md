ğŸ¯ ä»»å‹™ï¼šQueryå±¤ã®ä¸­ç¶™ã‚³ãƒ¼ãƒ‰æ’é™¤ã¨ã€æ§‹é€ å†…éƒ¨ã¸ã®å®Ÿè£…ç§»è¡Œï¼ˆä¸­ç¶™â†’æœ¬ä½“åŒ–ï¼‰

ğŸ§  èƒŒæ™¯ï¼š
å‰ãƒ•ã‚§ãƒ¼ã‚ºã«ãŠã„ã¦ã€Queryå±¤ã®ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ã¨è²¬å‹™åˆ†é›¢ï¼ˆBuilderç¾¤ã€EventSetã€Translatorç­‰ï¼‰ã¯å®Œäº†æ¸ˆã€‚  
ã—ã‹ã—ã€å„ã‚¯ãƒ©ã‚¹å†…ã§ã¯æ—§æ§‹é€ ï¼ˆ`KsqlDsl.Ksql.XxxBuilder`ï¼‰ã¸ã®ä¾å­˜ãŒæ®‹ã£ã¦ãŠã‚Šã€è²¬å‹™ç§»è¡ŒãŒæœªå®Œäº†ã¨ãªã£ã¦ã„ã‚‹ã€‚

---

ğŸ“¦ å¯¾è±¡ç®‡æ‰€ï¼ˆæš«å®šï¼‰

```csharp
// Query/Builders/HavingBuilder.cs
var havingBuilder = new KsqlDsl.Ksql.KsqlHavingBuilder();
ã“ã®ã‚ˆã†ãªæ§‹é€ ã¯ä»¥ä¸‹ã®Builderç¾¤ã§ã‚‚ç¢ºèªã•ã‚Œã¦ã„ã‚‹ï¼š

KsqlJoinBuilder

KsqlSelectBuilder

KsqlGroupByBuilder

KsqlWindowBuilder

KsqlOrderByBuilder

KsqlWhereBuilder

KsqlHavingBuilderï¼ˆã™ã§ã«ä¸­ç¶™ã•ã‚Œã¦ã„ã‚‹å´ï¼‰

ğŸ§© ä½œæ¥­å†…å®¹

âœ… 1. Query/Builders ä»¥ä¸‹ã®å…¨Builderã«å¯¾ã—ã¦ã€æ—§Ksqlå´ã¸ã®ä¾å­˜ã‚’æ’é™¤
â†’ ãã‚Œãã‚Œ Query/Builders/XxxBuilder.cs ã«å®Ÿè£…æœ¬ä½“ã‚’ç§»æ¤ãƒ»æ”¹ä¿®ã™ã‚‹

âœ… 2. å…±é€šãƒ­ã‚¸ãƒƒã‚¯ã‚’åˆ‡ã‚Šå‡ºã™å ´åˆã¯ Query/Builders/Common/BuilderUtil.cs ãªã©ã«é…ç½®ã—ã¦ã‚‚è‰¯ã„

âœ… 3. IKsqlBuilder ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æº€ãŸã—ãŸçŠ¶æ…‹ã‚’ç¶­æŒã—ã€æ—¢å­˜ã®å‘¼ã³å‡ºã—å´ãŒå£Šã‚Œãªã„ã‚ˆã†ã«ã™ã‚‹ã“ã¨


ğŸ›  å®Ÿè£…ä¾‹ï¼ˆBefore â†’ Afterï¼‰

csharp
ã‚³ãƒ”ãƒ¼ã™ã‚‹
ç·¨é›†ã™ã‚‹
// Before
public class HavingBuilder : IKsqlBuilder {
    public string Build(Expression expr) {
        return new KsqlDsl.Ksql.KsqlHavingBuilder().Build(expr);
    }
}

// After
public class HavingBuilder : IKsqlBuilder {
    public string Build(Expression expr) {
        var visitor = new KsqlExpressionVisitor();
        var condition = visitor.Visit(expr);
        return $"HAVING {condition}";
    }
}

ğŸ“˜ æ³¨æ„ç‚¹

å¼æœ¨å‡¦ç†ãªã©ã€å…±é€šã‚³ãƒ¼ãƒ‰ãŒè¤‡æ•°Builderã§é‡è¤‡ã™ã‚‹å ´åˆã¯å…±é€šåŒ–ã—ã¦ã‚ˆã„

æ—¢å­˜ã® ToKsql() ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ã“ã¨ï¼ˆè©©éŸ³ãŒæ¤œè¨¼ï¼‰

ğŸ“„ æˆæœç‰©ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

Query/Builders/*.cs ã«å®Ÿè£…ã•ã‚ŒãŸæ–°ãƒ­ã‚¸ãƒƒã‚¯

å…±é€šå‡¦ç†ãŒã‚ã‚Œã° Query/Builders/Common/ ã«æŠ½å‡ºã•ã‚ŒãŸãƒ˜ãƒ«ãƒ‘

 Ksqlæ§‹æ–‡ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ.md ã®ä½œæˆ
