# トピック／DLQ名の命名ルール設計論点（2025-06-11）

- 日時：2025-06-11
- 論点管理ファイル：board_meeting/2025-06-11_topic_dlq_naming.md
- 参加者：司令、天城

---

## 1. 検討の背景・目的

Kafkaトピック名とDLQ（デッドレターキュー）名の命名規則・運用ルールをKsqlDslプロジェクトとして公式に策定し、一貫した設計・実装・利用を実現する。

---

## 2. 制約・前提条件

- **Kafka側制約**：
    - 英数字、ピリオド（`.`）、アンダースコア（`_`）、ハイフン（`-`）は利用可
    - NG文字（スペース、スラッシュなど）は使用不可
    - 最大255バイトまで
    - 大文字小文字は区別される
- **KSQL側制約**：
    - stream/table名やtopic名でハイフンやピリオド等が含まれる場合は `"ダブルクォート"` で囲む必要
    - クォートなし識別子は英数字・アンダースコアのみ
- **C#側制約**：
    - クラス名にハイフン不可。クラス属性による外部名明示が必須

---

## 3. 命名ルール・設計方針

- **標準区切り文字は「.（ピリオド）」とする**
    - 例：`trading.order.stream`
- **ハイフン（`-`）もプロジェクト内で一貫していれば併用可**
    - 例：`trading-order-stream`
    - ただし、KSQL生成時はダブルクォートで識別子を囲むロジックを必ず実装
- **クラス属性で外部名（Kafka名）を明示できる**
    - 例：`[KafkaTopic(Name = "order-detail-v2")] public class OrderDetailV2 { ... }`
- **バージョン付与は「-v1」等のSuffixで表現し、属性で明示可能**
    - 例：`order-detail-v2`
- **明示属性がなければ規約変換（クラス名→小文字・区切り変換）を適用**
- **命名重複・制約違反時は警告・エラーを出すこと**

---

## 4. クォート要件（KSQL）

- ハイフン・ピリオド・その他記号を含む名前はKSQL上で自動的に`"..."`で囲う
- KSQL生成DSLは命名規則とクォートロジックを一元管理

---

## 5. 議論・未決論点

- プロジェクト標準としての推奨命名例・利用者ガイド文書化
- バージョン管理の扱い（クラス名自動→属性明示の優先順位）
- 既存資産・他システム連携との命名互換性

---

## 6. 次アクション

- サンプルPOCO定義・DSL記法例の収集
- KSQLクォート自動化ロジックの設計
- 利用者向け命名・バージョン付与ガイドのドラフト化

---

**このファイルは論点ごとに継続的に追記・合意内容・合意履歴を蓄積すること。**
